# Naming Rules

Нейминг кампании формируется в следующем порядке:

[OS]_[PROJECT]_[TIER]([COUNTRIES])_[GENDER]_[AGE]_[OPT MODEL][[EVENT?]]_[DATE]_[AUTOR]_[CBO/noCBO]_[BID STRATEGY]_[LANG]_[EXTRA?]

AND_LK_Tier-1(US)_M_21-65_CPA[ad_displayed_80]_16112025_YU_noCBO_bc_ENG_LK1

## Правила для каждого элемента:

### OS
значения:
- AND
- IOS

### PROJECT
Берётся из словаря `projects.json`:
- project.name → project.alias

**Структура проекта в `projects.json`:**
```json
{
  "ProjectName": {
    "alias": "PN",
    "account_names": ["LK1", "LK2"],
    "campaign_objective": "App promotion",
    "link_object_id": "o:...",
    "application_id": "x:...",
    "object_store_url": "http://...",
    "beneficiary": {
      "default": "...",
      "australia": "...",
      "taiwan": "...",
      "singapore": "..."
    },
    "payer": {
      "default": "...",
      "australia": "...",
      "taiwan": "...",
      "singapore": "..."
    }
  }
}
```

### Tier
значения (из `tiers.json`):
- **Tier1** (в нейминге может быть `Tier-1` для читаемости)
- **Asia**
- **Africa**
- **Arabian**
- **Europe**
- **LatAm** (в нейминге может быть `Latam`)
- **CIS**
- **Other**
- **WW** (используется когда страны из разных тиров или более 5 стран)

**Определение тира:**
1. Если пользователь указал тир напрямую (например, "Latam") — используется указанный тир
2. Если указаны конкретные страны:
   - Страны определяются по словарю `tiers.json` (из `examples/tiers_by_countries.csv`)
   - Если все страны из одного тира → используется этот тир
   - Если более 5 стран из разных тиров → используется `WW`
   - Если 5 или менее стран → используется тир, к которому относятся страны (если один тир), иначе перечисляются страны

### Countries
Страны формируются в строчку через запятую: `US,CA,GB`. Добавляются в круглые скобки, после тира.

**Важно:** Используйте правильные коды стран (GB для Великобритании, не UK). Ограниченные страны (CU, IR, RU, SD) не должны использоваться в таргетинге (см. `targeting.md`).

**Правила:**
- Если таргетинг на весь тир → в скобках не указываются страны, только тир: `AND_LK_Latam_M_21-65_...`
- Если указаны конкретные страны (5 или менее) → перечисляются в скобках: `AND_LK_Tier-1(US,CA)_M_21-65_...`
- Если более 5 стран из одного тира → используется тир, страны перечисляются в скобках: `AND_LK_Latam(BR,MX,AR,CO,CL,PE,EC)_M_21-65_...`
- Если более 5 стран из разных тиров → используется `WW`, страны перечисляются в скобках: `AND_LK_WW(US,CA,BR,MX,AR,CO,CL)_M_21-65_...`

### Gender
Men → M  
Women → F  
Both → MF 

### Age
Любой диапазон, например `18-44` или `18-65+`. По умолчанию `18-65+`

### Модель оптимизации
значения:
- CPI
- CPA
- tROAS

### Event
Используется только при CPA.
Берётся из словаря `events.json`.

### Date
Дата, в формате `DDMMYYYY`, по умолчанию указывается сегодняшняя

### Autor
Автор кампании, по умолчанию `KH`

### Тип кампании
значения:
- CBO
- noCBO


### Bid Strategy
`BidCap`, `CostCap`, `LowerCost`, `AdImpression`
 

### Language
Берётся из словаря `languages.json` (EN, ES, PT…).

**По умолчанию (если язык не указан):**
- В нейминге используется `_ALL_`
- В таргетинге таргетируются все языки (поле Locales остается пустым в финальном CSV)

## Использование нейминга

**Перед созданием файла:**
1. Сгенерированный нейминг **обязательно показывается пользователю**
2. Запрашивается подтверждение: "Создать кампанию с этим неймингом?"
3. Только после подтверждения пользователем создается файл

**После подтверждения:**
Сгенерированный нейминг применяется напрямую в `launches/[campaign_name].csv`:
- **Campaign Name** = сгенерированный нейминг
- **Ad Set Name** = сгенерированный нейминг (тот же)
- **Имя файла** = `launches/[campaign_name].csv` (где `[campaign_name]` — это сгенерированный нейминг)

Также нейминг записывается в `logs.csv` вместе с датой создания.

Промежуточные файлы не создаются. Нейминг генерируется по правилам и используется в финальном CSV только после подтверждения пользователем.